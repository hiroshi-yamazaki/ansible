Listen 443 https
SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog
SSLSessionCache         shmcb:/run/httpd/sslcache(512000)
SSLSessionCacheTimeout  300
SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin
SSLCryptoDevice builtin

<VirtualHost *:443>
  DocumentRoot /var/www/{{ server_name }}
  ServerName {{ server_name }}

  <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteOptions Inherit
  </IfModule>

  ErrorLog logs/ssl_{{ server_name }}-error_log

  LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" 
  TransferLog logs/ssl_{{ server_name }}-access_log

  LogLevel warn

  SSLEngine on
  SSLProtocol all -SSLv3
  SSLProxyProtocol all -SSLv3
  SSLHonorCipherOrder on

  SSLCertificateFile /etc/httpd/conf/ssl/server.pem
  SSLCertificateKeyFile /etc/httpd/conf/ssl/server.key
  SSLCertificateChainFile /etc/httpd/conf/ssl/server-ca.pem

  <Files ~ "\.(cgi|shtml|phtml|php3?)$">
    SSLOptions +StdEnvVars
  </Files>

  <Directory "/var/www/cgi-bin">
    SSLOptions +StdEnvVars
  </Directory>

  BrowserMatch "MSIE [2-5]" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0
  CustomLog logs/ssl_{{ server_name }}-request_log "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</VirtualHost>